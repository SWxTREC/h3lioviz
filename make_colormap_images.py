# Can be used to make images of the colormaps to be displayed on the frontend
# It saves the images in src/assets/images/
#
# To run:
#    python make_colormap_images.py
#
# There are two ways to add a new colormap.
#
# 1. You can use the Matplotlib name and just add a new name below
# 2. You can save the Paraview RGB array info and create a new numpy array
#    below. Then add the name and that array into the loop in that section.
#
import matplotlib.pyplot as plt
import numpy as np

vals = np.linspace(0, 1, 256)
vals = np.stack([vals, vals])

fig = plt.figure(figsize=(1, 0.1), dpi=256)

# 1. Matplotlib colormaps, just get them and interpolate
for name in ["viridis", "plasma", "inferno"]:
    ax = fig.add_axes((0, 0, 1, 1))

    ax.imshow(vals, aspect='auto', cmap=plt.get_cmap(name))
    ax.set_axis_off()

    fig.savefig(f'src/assets/images/{name}.png')
    # Remove our axes from the figure
    ax.remove()

# Define the Paraview colormaps, data obtained from the Paraview 5.9.1
# colormap editor
cool_to_warm = np.array([
    0,
    0.23137254902000001,
    0.298039215686,
    0.75294117647100001,
    0.5,
    0.86499999999999999,
    0.86499999999999999,
    0.86499999999999999,
    1,
    0.70588235294099999,
    0.015686274509800001,
    0.149019607843,
]).reshape(-1, 4)

nic_CubicL = np.array([
    -1,
    0.47996499999999997,
    0.0118108,
    0.53069999999999995,
    -0.87451000000000001,
    0.52221300000000004,
    0.055128200000000002,
    0.70691899999999996,
    -0.74902000000000002,
    0.50839000000000001,
    0.23727799999999999,
    0.86776399999999998,
    -0.623529,
    0.45161699999999999,
    0.373834,
    0.98725499999999999,
    -0.49803900000000001,
    0.39365,
    0.497255,
    0.97506000000000004,
    -0.37254900000000002,
    0.32863100000000001,
    0.59963900000000003,
    0.89184300000000005,
    -0.247059,
    0.25004300000000002,
    0.69028599999999996,
    0.77855300000000005,
    -0.121569,
    0.24965599999999999,
    0.76490499999999995,
    0.64585700000000001,
    0.0039215700000000001,
    0.297954,
    0.82146600000000003,
    0.50448999999999999,
    0.129412,
    0.337509,
    0.87259500000000001,
    0.35844700000000002,
    0.25490200000000002,
    0.43001099999999998,
    0.91378899999999996,
    0.29707899999999998,
    0.38039200000000001,
    0.58719100000000002,
    0.93138100000000001,
    0.33335300000000001,
    0.50588200000000005,
    0.72793699999999995,
    0.93591000000000002,
    0.353742,
    0.63137299999999996,
    0.826403,
    0.92108100000000004,
    0.365066,
    0.75686299999999995,
    0.89320100000000002,
    0.84631699999999999,
    0.37266199999999999,
    0.88235300000000005,
    0.96534699999999996,
    0.73884000000000005,
    0.37850600000000001,
    1,
    0.98323499999999997,
    0.59745099999999995,
    0.36685600000000002,
]).reshape(-1, 4)

blue_orange = np.array(		[
    -30.339913064976301,
    0.086274509803921595,
    0.0039215686274509803,
    0.29803921568627501,
    -29.350255966186499,
    0.11372500000000001,
    0.023529399999999999,
    0.45097999999999999,
    -28.5283393859863,
    0.105882,
    0.050980400000000002,
    0.50980400000000003,
    -27.958028793335,
    0.039215699999999999,
    0.039215699999999999,
    0.56078399999999995,
    -27.404491424560501,
    0.031372499999999998,
    0.098039200000000007,
    0.59999999999999998,
    -26.867729187011701,
    0.043137300000000003,
    0.16470599999999999,
    0.63921600000000001,
    -26.096134185791001,
    0.054901999999999999,
    0.24313699999999999,
    0.67843100000000001,
    -25.072929382324201,
    0.054901999999999999,
    0.31764700000000001,
    0.70980399999999999,
    -23.814893333008399,
    0.050980400000000002,
    0.39607799999999999,
    0.74117599999999995,
    -22.999265866512399,
    0.039215699999999999,
    0.466667,
    0.76862699999999995,
    -22.183638400016399,
    0.031372499999999998,
    0.53725500000000004,
    0.78823500000000002,
    -21.3323650360107,
    0.031372499999999998,
    0.61568599999999996,
    0.81176499999999996,
    -20.460126876831101,
    0.023529399999999999,
    0.70980399999999999,
    0.83137300000000003,
    -19.587886810302699,
    0.050980400000000002,
    0.80000000000000004,
    0.85097999999999996,
    -18.866613388061499,
    0.070588200000000004,
    0.85490200000000005,
    0.87058800000000003,
    -18.1956596374512,
    0.26274500000000001,
    0.90196100000000001,
    0.86274499999999998,
    -17.608575820922901,
    0.42352899999999999,
    0.94117600000000001,
    0.87451000000000001,
    -16.7027893066406,
    0.57254899999999997,
    0.96470599999999995,
    0.83529399999999998,
    -16.098930358886701,
    0.65882399999999997,
    0.98039200000000004,
    0.84313700000000003,
    -15.6628112792969,
    0.764706,
    0.98039200000000004,
    0.86666699999999997,
    -15.1931447982788,
    0.82745100000000005,
    0.98039200000000004,
    0.88627500000000003,
    -14.2705841064453,
    0.91372500000000001,
    0.98823499999999997,
    0.93725499999999995,
    -13.9854288101196,
    1,
    1,
    0.97254901960784301,
    -13.700273513793899,
    0.98823499999999997,
    0.98039200000000004,
    0.87058800000000003,
    -13.280927658081101,
    0.99215686274509796,
    0.97254901960784301,
    0.80392156862745101,
    -12.9622249603271,
    0.99215699999999996,
    0.96470599999999995,
    0.71372500000000005,
    -12.425462722778301,
    0.98823499999999997,
    0.95686300000000002,
    0.64313699999999996,
    -11.5699977874756,
    0.98039200000000004,
    0.91764699999999999,
    0.50980400000000003,
    -10.8487224578857,
    0.96862700000000002,
    0.87451000000000001,
    0.40784300000000001,
    -10.110673904418899,
    0.94901999999999997,
    0.82352899999999996,
    0.32156899999999999,
    -9.5739116668701207,
    0.92941200000000002,
    0.77647100000000002,
    0.27843099999999998,
    -8.7855415344238299,
    0.90980399999999995,
    0.71764700000000003,
    0.235294,
    -8.0810413360595703,
    0.89019599999999999,
    0.65882399999999997,
    0.196078,
    -7.5023440030884698,
    0.87843099999999996,
    0.61960800000000005,
    0.168627,
    -6.6867165365924803,
    0.87058800000000003,
    0.54901999999999995,
    0.156863,
    -5.8710890700964802,
    0.85097999999999996,
    0.47450999999999999,
    0.145098,
    -5.0554616036004898,
    0.83137300000000003,
    0.41176499999999999,
    0.13333300000000001,
    -4.2398341371044896,
    0.81176499999999996,
    0.34509800000000002,
    0.11372500000000001,
    -3.4242066706085001,
    0.78823500000000002,
    0.26666699999999999,
    0.094117599999999996,
    -2.6085792041125,
    0.74117599999999995,
    0.18431400000000001,
    0.074509800000000001,
    -1.7929517376165101,
    0.69019600000000003,
    0.12548999999999999,
    0.062745099999999998,
    -0.97732427112051701,
    0.61960800000000005,
    0.062745099999999998,
    0.043137300000000003,
    -0.21411496400833099,
    0.54901999999999995,
    0.027451,
    0.070588200000000004,
    0.45683822035789501,
    0.47058800000000001,
    0.0156863,
    0.090196100000000001,
    1.2116605043411299,
    0.40000000000000002,
    0.0039215700000000001,
    0.101961,
    2.2851855948634601,
    0.188235294117647,
    0,
    0.070588235294117604
]).reshape(-1, 4)

# 2. Paraview colormaps take a little more work
#    we need to do the interpolation ourselves. This is
#    a quick and dirty approximation for sample images.
for name, arr in zip(["cool_to_warm", "nic_CubicL", "blue_orange"],
                     [cool_to_warm, nic_CubicL, blue_orange]):

    ax = fig.add_axes((0, 0, 1, 1))

    minval = np.min(arr[:, 0])
    maxval = np.max(arr[:, 0])
    # May not be 0 -> 1
    interp_vals = vals*(maxval - minval) + minval
    r = np.interp(interp_vals, arr[:, 0], arr[:, 1])
    g = np.interp(interp_vals, arr[:, 0], arr[:, 2])
    b = np.interp(interp_vals, arr[:, 0], arr[:, 3])

    rgb = np.stack([r, g, b], axis=-1)

    ax.imshow(rgb, aspect='auto')
    ax.set_axis_off()

    fig.savefig(f'src/assets/images/{name}.png')
    # Remove our axes from the figure
    ax.remove()
